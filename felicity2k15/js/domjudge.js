function XMLHttpHandle(){var e;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(t){e=!1}}return e}function updateMenu(e,t){var n=XMLHttpHandle();n&&(n.onreadystatechange=function(){if(4==n.readyState){var a=JSON.parse(n.responseText),l=document.getElementById("menu_clarifications"),o="";null!==l&&(0==a[0]?l.className=null:(o=" ("+a[0]+" new)",l.className="new"),l.innerHTML!="clarifications"+o&&(l.innerHTML="clarifications"+o,e&&location.reload()));var l=document.getElementById("menu_judgehosts"),o="";null!==l&&(0==a[1]?l.className=null:(o=" ("+a[1]+" down)",l.className="new"),l.innerHTML!="judgehosts"+o&&(l.innerHTML="judgehosts"+o,t&&location.reload()))}},n.open("GET","update_menu.php",!0),n.send(null))}function editTcDesc(e){var t=document.getElementById("tcdesc_"+e);t.parentNode.setAttribute("onclick",""),t.parentNode.removeChild(t.nextSibling),t.style.display="block",t.setAttribute("name","description["+e+"]")}function hideTcDescEdit(e){var t=document.getElementById("tcdesc_"+e);t.style.display="none",t.setAttribute("name","invalid");var n=document.createElement("span");n.innerHTML=t.innerHTML,t.parentNode.appendChild(n)}function editTcSample(e){var t=document.getElementById("sample_"+e+"_");t.parentNode.setAttribute("onclick","");for(var n=t.nextSibling;"#text"==n.nodeName;)n=n.nextSibling;t.parentNode.removeChild(n),t.style.display="block",t.setAttribute("name","sample["+e+"]")}function hideTcSample(e,t){var n=document.getElementById("sample_"+e+"_");n.style.display="none",n.setAttribute("name","invalid");var a=document.createElement("span");a.innerHTML=t,n.parentNode.appendChild(a)}function detectProblemLanguage(e){var t=document.getElementById("addfile");t&&(t.disabled=!1);var n=e.replace(/^.*[\\\/]/,"").toLowerCase().split(".").reverse();if(!(n.length<2)){var a=document.getElementById("probid");if(""==a.value){for(i=0;i<a.length;i++)a.options[i].text.toLowerCase()==n[1]&&(a.selectedIndex=i);var a=document.getElementById("langid");if(""==a.value){var l=getMainExtension(n[0]);for(i=0;i<a.length;i++)a.options[i].value==l&&(a.selectedIndex=i)}}}}function checkUploadForm(){var e=document.getElementById("langid"),t=e.options[e.selectedIndex].value,n=e.options[e.selectedIndex].text,a=document.getElementById("maincode"),l=a.value,o=document.getElementById("probid"),i=o.options[o.selectedIndex].value,r=o.options[o.selectedIndex].text+" - "+getProbDescription(o.options[o.selectedIndex].text),d=document.getElementsByName("code[]"),s=!1;if(e.className=o.className="",""==t&&(e.focus(),e.className="errorfield",s=!0),""==i&&(o.focus(),o.className="errorfield",s=!0),""==l)return!1;if(s)return!1;for(var c=0,u=1;u<d.length;u++)""!=d[u].value&&c++;var m="";c>0&&(m="Additional source files: "+c+"\n");var g="Main source file: "+l+"\n"+m+"\nProblem: "+r+"\nLanguage: "+n+"\n\nMake submission?";return confirm(g)}function resetUploadForm(e){var t=document.getElementById("addfile"),n=document.getElementById("auxfiles");t.disabled=!0,n.innerHTML="",doReload=!0,setTimeout("reloadPage()",1e3*e)}function reloadPage(){doReload&&location.reload()}function initReload(e){setTimeout("reloadPage()",1e3*e)}function initFileUploads(e){var t=document.getElementById("maincode");if(e>1){var n=document.getElementById("addfile"),a="multiple"in t;a&&(n.style.display="none")}t.onclick=function(){doReload=!1},t.onchange=t.onmouseout=function(){""!=this.value&&detectProblemLanguage(this.value)}}function collapse(e){var t=document.getElementById("detail"+e);t.style.display="none"==t.style.display?"block":"none"}function addFileUpload(){var e=document.createElement("input");e.type="file",e.name="code[]";var t=document.createElement("br");document.getElementById("auxfiles").appendChild(e),document.getElementById("auxfiles").appendChild(t)}function togglelastruns(){var e={lastruntime:0,lastresult:1,lasttcruns:2};for(var t in e)for(cells=document.getElementsByClassName(t),i=0;i<cells.length;i++)style="inline","lasttcruns"==t&&(style="table-row"),cells[i].style.display="none"==cells[i].style.display?style:"none"}function updateClock(){curtime=initial+offset,date.setTime(1e3*curtime);var e="";if(curtime>=starttime&&endtime>curtime)var t=endtime-curtime,n="time left: ";else if(curtime>=activatetime&&starttime>curtime)var t=starttime-curtime,n="time to start: ";else var t=0,n="";t&&(t>86400&&(d=Math.floor(t/86400),e+=d+"d ",t-=24*d*60*60),t>3600&&(h=Math.floor(t/3600),e+=h+":",t-=60*h*60),m=Math.floor(t/60),10>m&&(e+="0"),e+=m+":",t-=60*m,10>t&&(e+="0"),e+=t),timecurelt.innerHTML=date.toString().replace(/(\w{3})\ (\w{3})\ (\d{2})\ (\d{4})\ (\d{2}:\d{2}:\d{2}).*\((\w+)\)/,"$1 $3 $2 $4 $5 $6"),timeleftelt.innerHTML=n+e,offset++}function setCookie(e,t){var n=new Date;n.setDate(n.getDate()+3),document.cookie=e+"="+escape(t)+"; expires="+n.toUTCString()}function getCookie(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var a=t[n].indexOf("="),l=t[n].substr(0,a),o=t[n].substr(a+1);if(l=l.replace(/^\s+|\s+$/g,""),l==e)return unescape(o)}return""}function getSelectedTeams(){var e=getCookie("domjudge_teamselection");return null==e||""==e?new Array:JSON.parse(e)}function getScoreboard(){var e=document.getElementsByClassName("scoreboard");return null==e||null==e[0]?null:e[0].rows}function getRank(e){return e.getElementsByTagName("td")[0]}function getHeartCol(e){return e.getElementsByTagName("td")[1]}function getTeamname(e){return e.getAttribute("teamid")}function toggle(e,t){for(var n=getScoreboard(),a=getSelectedTeams(),l=0,o=0;o<a.length;o++)for(var i=0;i<n.length;i++){var r=getTeamname(n[i]);if(null!=r&&r==a[o]){l++;break}}var d=getTeamname(n[e+l]);if(t)a[a.length]=d;else{for(var s=new Array,o=0;o<a.length;o++)a[o]!=d&&(s[s.length]=a[o]);a=s}var c=JSON.stringify(a);setCookie("domjudge_teamselection",c),window.location.reload()}function addHeart(e,t,n,a){var l=getHeartCol(t),o=a?"red":"gray";return l.innerHTML+'<span class="heart" style="color:'+o+';" onclick="toggle('+n+","+(a?"false":"true")+')">&#9829;</span>'}function initFavouriteTeams(){var e=getScoreboard();if(null!=e){for(var t=getSelectedTeams(),n=new Array,a=0,l=0,o=0;o<e.length-1;o++){var i=!1,r=getTeamname(e[o]);if(null!=r){for(var d=getRank(e[o]),s=getHeartCol(e[o]),c=d.innerHTML,u=0;u<t.length;u++)if(r==t[u]){i=!0,s.innerHTML=addHeart(c,e[o],o,i),n[a]=e[o].cloneNode(!0),""==c&&(getRank(n[a]).innerHTML+=l),e[o].style.background="lightyellow",a++;break}i||(s.innerHTML=addHeart(c,e[o],o,i)),""!=c&&(l=c)}}for(var u=0;a>u;u++){var m=n[u],d=getRank(m),g="";0==u&&(g+="border-top: 2px solid black;"),u==a-1&&(g+="border-bottom: thick solid black;"),m.setAttribute("style",g);var f=e[1].parentNode;f.insertBefore(m,e[u+1])}}}var doReload=!0;